package  sample.scrollbar{	import jp.cellfusion.ui.AbstractUI;	import jp.cellfusion.ui.events.ScrollEvent;	import jp.cellfusion.ui.scrollbar.IScrollbar;	import jp.cellfusion.ui.scrollbar.Scrollbar;	import flash.display.GradientType;	import flash.display.Sprite;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.events.Event;	import flash.geom.Matrix;	/**	 * @author Mk-10:cellfusion	 */	public class ScrollbarSample extends Sprite 	{		public var scrollbar:Sprite;		private var _mask:Sprite;		private var _sp:Sprite;		private var _sb:IScrollbar;		public function ScrollbarSample()		{			stage.align = StageAlign.TOP_LEFT;			stage.scaleMode = StageScaleMode.NO_SCALE;						AbstractUI.initialize(this);						_mask = new Sprite();			_sp = new Sprite();						_sp.mask = _mask;						addChild(_mask);			addChild(_sp);						_sb = new Scrollbar(scrollbar);			_sb.setMargin(2, 2, 2, 2);			_sb.addEventListener(ScrollEvent.SCROLL_CHANGED, scrollChangeHandler);						resize();						_sb.initialize(_sp.height, _mask.height);						// ステージがリサイズするとスクロールバーもリサイズ			stage.addEventListener(Event.RESIZE, resize);		}				private function resize(event:Event = null):void		{			scrollbar.x = stage.stageWidth - 24;						var track:Sprite = _sb.scrollView.track;						track.graphics.clear();			track.graphics.beginFill(0x000000);			track.graphics.drawRect(0, 0, stage.stageWidth - 24, stage.stageHeight-48);			track.graphics.endFill();						track.height = stage.stageHeight - 48;						var downButton:Sprite = _sb.scrollView.downButton;			downButton.y = stage.stageHeight - 24;						_mask.graphics.clear();			_mask.graphics.beginFill(0x000000, 100);			_mask.graphics.drawRect(0, 0, stage.stageWidth - 24, stage.stageHeight);			_mask.graphics.endFill();						var mat:Matrix = new Matrix();			mat.createGradientBox(2000, stage.stageWidth - 24);			mat.rotate(Math.PI/2);						_sp.graphics.clear();			_sp.graphics.beginGradientFill(GradientType.LINEAR, [0xFFFFFF, 0x000000], [1, 1], [0x00, 0xFF], mat);			_sp.graphics.drawRect(0, 0, stage.stageWidth - 24, 2000);			_sp.graphics.endFill();						_sb.viewSize = _mask.height;			_sb.targetSize = _sp.height;		}				private function scrollChangeHandler(event:ScrollEvent):void		{//			trace('scrollChange');			_sp.y = (_mask.height - _sp.height) * _sb.scrollPercent;		}	}}